:root {
  color-scheme: light dark;
  /* Light Theme Colors (Untouched) */
  --light-bg: #f8f9fa;
  --light-surface: #ffffff;
  --light-text-primary: #202124;
  --light-text-secondary: #5f6368;
  --light-primary: #1a73e8;
  --light-primary-hover: #185abc;
  --light-border: #dadce0;
  --light-error: #d93025;
  --light-card-bg: #e8f0fe;
  --light-disabled-bg: #e0e0e0;
  --light-disabled-text: #a0a0a0;
  --light-shadow-color-1: rgba(60, 64, 67, 0.15);
  --light-shadow-color-2: rgba(60, 64, 67, 0.1);
  --light-focus-shadow-color: rgba(26, 115, 232, 0.2);
  --light-button-text: white;
  --light-correct-bg: #e6f4ea;
  --light-correct-text: #1e8e3e;
  --light-incorrect-bg: #fce8e6;
  --light-incorrect-text: #c5221f;
  --light-incorrect-flash: #fce8e6;
  --light-correct-border: #1e8e3e;
  --light-incorrect-border: #d93025;

  /* Dark Theme Colors (Updated from Logo) */
  --dark-bg: #101418;
  --dark-surface: #1A1F26;
  --dark-text-primary: #F0F6FC;
  --dark-text-secondary: #8B949E;
  --dark-primary: #00E5FF; /* Electric Cyan */
  --dark-primary-hover: #80F2FF;
  --dark-secondary-accent: #FF4081; /* Vibrant Magenta */
  --dark-border: #30363D;
  --dark-error: #f28b82;
  --dark-card-bg: #1A1F26;
  --dark-disabled-bg: #21262d;
  --dark-disabled-text: #555c64;
  --dark-shadow-color-1: rgba(0, 0, 0, 0.4);
  --dark-shadow-color-2: rgba(0, 0, 0, 0.3);
  --dark-focus-shadow-color: rgba(0, 229, 255, 0.2);
  --dark-button-text: var(--dark-bg); /* Dark text on bright button */
  --dark-correct-bg: #1c3d2f;
  --dark-correct-text: #58a6ff;
  --dark-incorrect-bg: #4d1c18;
  --dark-incorrect-text: #f4c7c3;
  --dark-incorrect-flash: var(--dark-secondary-accent);
  --dark-correct-border: #2f81f7;
  --dark-incorrect-border: #e5534b;

  /* Shared Variables */
  --flashcard-width: 220px;
  --flashcard-height: 150px;
  --sidebar-width: 240px;
  --sidebar-width-collapsed: 80px;
}

body.light-theme { color-scheme: light; }
body.dark-theme { color-scheme: dark; }

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
  20%, 40%, 60%, 80% { transform: translateX(5px); }
}

body {
  font-family: 'Google Sans', 'Roboto', Arial, sans-serif;
  margin: 0;
  background-color: light-dark(var(--light-bg), var(--dark-bg));
  color: light-dark(var(--light-text-primary), var(--dark-text-primary));
  box-sizing: border-box;
  min-height: 100vh;
  overflow-x: hidden;
}

.hidden { display: none !important; }

/* --- App Shell & Layout --- */
#appShell {
  display: flex;
  height: 100vh;
}

#sidebar {
  width: var(--sidebar-width-collapsed);
  background-color: light-dark(var(--light-surface), var(--dark-surface));
  border-right: 1px solid light-dark(var(--light-border), var(--dark-border));
  padding: 20px 0;
  transition: width 0.3s ease;
  flex-shrink: 0;
  overflow-x: hidden;
}

#appShell:hover #sidebar {
    width: var(--sidebar-width);
}

#mainContent {
  flex-grow: 1;
  display: flex;
  flex-direction: column;
  overflow-y: auto;
  height: 100vh;
}

/* --- Sidebar Navigation --- */
.sidebar-nav {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.nav-item {
  display: flex;
  align-items: center;
  gap: 20px;
  padding: 12px 24px;
  color: light-dark(var(--light-text-secondary), var(--dark-text-secondary));
  text-decoration: none;
  font-size: 1rem;
  font-weight: 500;
  border-radius: 0 50px 50px 0;
  transition: background-color 0.2s, color 0.2s;
  white-space: nowrap;
  cursor: pointer;
}

.nav-item svg {
  flex-shrink: 0;
}

.nav-item span {
    opacity: 0;
    transition: opacity 0.2s ease;
}

#appShell:hover #sidebar .nav-item span {
    opacity: 1;
    transition-delay: 0.1s;
}

.nav-item:hover {
  background-color: light-dark(var(--light-card-bg), var(--dark-card-bg));
}

.nav-item.active {
  background-color: light-dark(var(--light-primary), var(--dark-primary));
  color: light-dark(var(--light-button-text), var(--dark-button-text));
}

/* --- Main Header --- */
#appHeader {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  border-bottom: 1px solid light-dark(var(--light-border), var(--dark-border));
  background-color: light-dark(var(--light-bg), var(--dark-bg));
  position: sticky;
  top: 0;
  z-index: 900;
}

.header-actions {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 10px;
}

.header-btn {
  background: transparent;
  border: none;
  border-radius: 50%;
  width: 40px;
  height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  color: light-dark(var(--light-text-secondary), var(--dark-text-secondary));
  padding: 0;
  transition: background-color 0.2s;
}

.header-btn:hover {
  background-color: light-dark(var(--light-card-bg), var(--dark-card-bg));
}

.header-btn svg {
  width: 24px;
  height: 24px;
  fill: currentColor;
}

#headerBackBtn svg {
    fill: light-dark(var(--light-text-primary), var(--dark-text-primary));
}

.round-btn {
  background-color: light-dark(var(--light-card-bg), var(--dark-surface));
}

/* --- User Profile & Menu --- */
.user-profile {
  position: relative;
}

#userProfileBtn img {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    object-fit: cover;
}

.user-menu-separator {
    height: 1px;
    background-color: light-dark(var(--light-border), var(--dark-border));
    margin: 8px 0;
}


/* --- Content Wrapper & Views --- */
#contentWrapper {
  padding: 20px 40px;
}

/* --- Home View --- */
#homeView {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.home-header {
  text-align: center;
  margin-bottom: 40px;
  margin-top: 20px;
}

.home-header h2 {
    font-size: 2.5rem;
    font-weight: 700;
    margin-bottom: 1rem;
}

.home-header p {
    font-size: 1.1rem;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
    color: light-dark(var(--light-text-secondary), var(--dark-text-secondary));
}

/* --- Carousel --- */
.carousel-wrapper {
  position: relative;
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.carousel {
  display: flex;
  gap: 20px;
  overflow-x: auto;
  scroll-behavior: smooth;
  padding: 20px;
  width: 100%;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.carousel::-webkit-scrollbar { display: none; }

.carousel-btn {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  z-index: 10;
  background-color: light-dark(var(--light-surface), var(--dark-surface));
  border: 1px solid light-dark(var(--light-border), var(--dark-border));
  border-radius: 50%;
  width: 48px;
  height: 48px;
  cursor: pointer;
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  transition: all 0.2s ease-in-out;
  color: light-dark(var(--light-text-secondary), var(--dark-text-secondary));
}
.carousel-btn:hover {
    transform: translateY(-50%) scale(1.1);
    box-shadow: 0 4px 10px rgba(0,0,0,0.15);
}
.carousel-btn svg {
  fill: currentColor;
  width: 24px;
  height: 24px;
}
.carousel-btn:disabled {
    opacity: 0.4;
    cursor: not-allowed;
    transform: translateY(-50%);
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

#prevBtn { left: -10px; }
#nextBtn { right: -10px; }


/* --- Study Mode Cards --- */
.study-mode-card {
  flex: 0 0 240px;
  height: 350px;
  border-radius: 24px;
  padding: 24px;
  cursor: pointer;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  display: flex;
  flex-direction: column;
  position: relative;
  overflow: hidden;
  background-color: light-dark(var(--light-surface), var(--dark-surface));
  color: light-dark(var(--light-text-primary), var(--dark-text-primary));
  border: 1px solid light-dark(var(--light-border), var(--dark-border));
}
.study-mode-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 0 20px light-dark(var(--light-shadow-color-1), var(--dark-focus-shadow-color));
    border-color: light-dark(var(--light-primary), var(--dark-primary));
}
.study-mode-card h3 {
    margin: 0;
    font-size: 1.5rem;
    font-weight: 500;
    z-index: 1;
}

#mode-aprender h3 { color: light-dark(inherit, var(--dark-primary)); }
#mode-cartoes h3 { color: light-dark(inherit, var(--dark-secondary-accent)); }
#mode-combinar h3 { color: light-dark(inherit, #FFAB40); } /* Amber */
#mode-guiada h3 { color: light-dark(inherit, #4CAF50); } /* Green */
#mode-misto h3 { color: light-dark(inherit, #7E57C2); } /* Deep Purple */

.card-preview {
  margin-top: auto;
  width: 100%;
  height: 220px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 20px;
  box-sizing: border-box;
  opacity: 0.5;
}

/* Cleanup old preview styles */
.learn-preview, .cards-preview, .match-preview, .guided-preview, .misto-preview {
  display: none;
}


/* --- Individual Study Views --- */
#studyViewContainer {
  width: 100%;
  max-width: 800px;
  margin: 0 auto;
  position: relative;
}

.container {
  background-color: light-dark(var(--light-surface), var(--dark-surface));
  padding: 40px;
  border-radius: 12px;
  box-shadow: 0 1px 3px light-dark(var(--light-shadow-color-1), var(--dark-shadow-color-1)),
              0 4px 8px light-dark(var(--light-shadow-color-2), var(--dark-shadow-color-2));
  width: 100%;
  text-align: center;
  margin-top: 20px;
  box-sizing: border-box;
}

h1 {
  color: light-dark(var(--light-text-primary), var(--dark-text-primary));
  margin-bottom: 15px;
  font-size: 2em;
  font-weight: 500;
}

p {
  margin-bottom: 25px;
  color: light-dark(var(--light-text-secondary), var(--dark-text-secondary));
  line-height: 1.6;
}

textarea, input[type="text"], input[type="password"], input[type="number"], input[type="email"] {
  width: calc(100% - 32px);
  padding: 15px;
  margin-bottom: 15px;
  border: 1px solid light-dark(var(--light-border), var(--dark-border));
  border-radius: 8px;
  font-size: 16px;
  background-color: light-dark(var(--light-bg), var(--dark-bg));
  color: light-dark(var(--light-text-primary), var(--dark-text-primary));
  transition: border-color 0.3s ease, box-shadow 0.3s ease;
  font-family: 'Roboto', sans-serif;
}

textarea { min-height: 120px; resize: vertical; }

textarea:focus, input:focus {
  outline: none;
  border-color: light-dark(var(--light-primary), var(--dark-primary));
  box-shadow: 0 0 0 2px light-dark(var(--light-focus-shadow-color), var(--dark-focus-shadow-color));
}

button {
  background-color: light-dark(var(--light-primary), var(--dark-primary));
  color: light-dark(var(--light-button-text), var(--dark-button-text));
  padding: 14px 24px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 16px;
  font-weight: 500;
  transition: background-color 0.3s ease, box-shadow 0.2s ease, transform 0.1s ease;
  box-shadow: 0 1px 2px light-dark(var(--light-shadow-color-2), var(--dark-shadow-color-2));
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
}

button:hover {
  background-color: light-dark(var(--light-primary-hover), var(--dark-primary-hover));
  box-shadow: 0 0 15px light-dark(var(--light-focus-shadow-color), var(--dark-focus-shadow-color));
}

button:active {
  transform: scale(0.98);
}

button:focus {
  outline: none;
  box-shadow: 0 0 0 3px light-dark(var(--light-focus-shadow-color), var(--dark-focus-shadow-color));
}

button:disabled {
  background-color: light-dark(var(--light-disabled-bg), var(--dark-disabled-bg));
  color: light-dark(var(--light-disabled-text), var(--dark-disabled-text));
  cursor: not-allowed;
  box-shadow: none;
  transform: none;
}

button.secondary-btn {
  background-color: transparent;
  color: light-dark(var(--light-primary), var(--dark-primary));
  border: 1px solid light-dark(var(--light-primary), var(--dark-primary));
}

button.secondary-btn:hover {
  background-color: light-dark(rgba(26, 115, 232, 0.08), var(--dark-focus-shadow-color));
  border-color: light-dark(var(--light-primary-hover), var(--dark-primary-hover));
  box-shadow: none;
}

/* --- Attachment Area Styles --- */
.attachment-bar {
    display: flex;
    gap: 10px;
    align-items: center;
    margin-bottom: 15px;
    flex-wrap: wrap;
}

.icon-only-btn {
    padding: 10px;
    border-radius: 50%;
    width: 44px;
    height: 44px;
}

.file-preview {
    display: flex;
    align-items: center;
    gap: 10px;
    background-color: light-dark(var(--light-card-bg), var(--dark-card-bg));
    padding: 8px 16px;
    border-radius: 20px;
    font-size: 0.9rem;
    border: 1px solid light-dark(var(--light-border), var(--dark-border));
}

.close-preview-btn {
    background: none;
    border: none;
    color: light-dark(var(--light-text-secondary), var(--dark-text-secondary));
    font-size: 1.2rem;
    cursor: pointer;
    padding: 0 4px;
    line-height: 1;
}
.close-preview-btn:hover {
    color: light-dark(var(--light-error), var(--dark-error));
}

/* Camera Styles */
.camera-container {
    width: 100%;
    margin-bottom: 20px;
    border-radius: 12px;
    overflow: hidden;
    background-color: black;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
}

#cameraVideo {
    width: 100%;
    max-height: 400px;
    object-fit: contain;
}

.camera-controls {
    padding: 15px;
    width: 100%;
    display: flex;
    justify-content: center;
    gap: 15px;
    background-color: rgba(0,0,0,0.7);
    position: absolute;
    bottom: 0;
}

/* --- Error Messages --- */
.error-message, .solution-message, .match-message, .learn-message, .misto-message, #loginError {
  color: light-dark(var(--light-error), var(--dark-error));
  margin-top: 10px;
  margin-bottom: 10px;
  font-weight: 500;
  min-height: 1.5em;
  text-align: center;
}

#loginForm .error-message {
    margin-bottom: 15px;
    margin-top: -5px;
}

/* --- Flashcard Specific --- */
.flashcard-actions {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
}
.flashcards-container {
  display: flex; flex-wrap: wrap; gap: 25px; margin-top: 40px; justify-content: center; perspective: 1000px;
}
.flashcard {
  background-color: transparent; width: var(--flashcard-width); height: var(--flashcard-height); border: none; border-radius: 10px; cursor: pointer; perspective: 1000px; box-shadow: none;
}
.flashcard-inner {
  position: relative; width: 100%; height: 100%; text-align: center; transition: transform 0.6s; transform-style: preserve-3d; box-shadow: 0 1px 2px light-dark(var(--light-shadow-color-2), var(--dark-shadow-color-2)); border-radius: 10px;
}
.flashcard.flipped .flashcard-inner { transform: rotateY(180deg); }
.flashcard-front, .flashcard-back {
  position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 20px; box-sizing: border-box; border-radius: 10px; border: 1px solid light-dark(var(--light-border), var(--dark-border)); background-color: light-dark(var(--light-card-bg), var(--dark-card-bg));
}
.flashcard-back { transform: rotateY(180deg); }
.flashcard:hover .flashcard-inner { box-shadow: 0 0 10px light-dark(var(--light-focus-shadow-color), var(--dark-focus-shadow-color)); }

.term, .definition {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
}
.term > div, .definition > div {
    flex-grow: 1;
}
.term { font-size: 1.3em; font-weight: 500; }
.definition { font-size: 1.0em; color: light-dark(var(--light-text-secondary), var(--dark-text-secondary)); line-height: 1.4; }

/* --- Guided Learning Specific --- */
#guidedLearningView .container { display: flex; flex-direction: column; }
#solveButton { margin-bottom: 10px; }
.solution-container {
  margin-top: 30px; padding: 25px; border: 1px solid light-dark(var(--light-border), var(--dark-border)); border-radius: 12px; text-align: left; background-color: light-dark(var(--light-bg), var(--dark-bg)); display: none;
}
.solution-container.visible { display: block; }
.solution-container h3 {
    font-size: 1.6rem; color: light-dark(var(--light-primary), var(--dark-primary)); margin-bottom: 20px; border-bottom: 2px solid light-dark(var(--light-border), var(--dark-border)); padding-bottom: 10px;
}
.solution-container h3 .speech-text-wrapper,
.solution-step h4 .speech-text-wrapper {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.solution-step { margin-bottom: 20px; }
.solution-step h4 { font-size: 1.2rem; font-weight: 500; margin-bottom: 8px; }
.solution-step p { margin-bottom: 10px; line-height: 1.7; }
.solution-step code {
  display: block; background-color: light-dark(var(--light-surface), var(--dark-surface)); padding: 12px; border-radius: 6px; font-family: 'Courier New', Courier, monospace; white-space: pre-wrap; word-wrap: break-word; border: 1px solid light-dark(var(--light-border), var(--dark-border));
}
.final-answer {
  margin-top: 25px; padding: 15px; background-color: light-dark(var(--light-card-bg), var(--dark-bg)); border-left: 4px solid light-dark(var(--light-primary), var(--dark-primary)); font-weight: 500;
}
.final-answer strong { display: block; margin-bottom: 5px; font-size: 1.1rem; }

/* --- Match Game Specific --- */
#gameHeader { display: flex; justify-content: space-between; width: 100%; margin-bottom: 20px; font-size: 1.2em; font-weight: 500; }
#gameGrid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; width: 100%; }
.game-column { display: flex; flex-direction: column; gap: 15px; }
.match-card {
  padding: 20px; border-radius: 8px; border: 1px solid light-dark(var(--light-border), var(--dark-border)); background-color: light-dark(var(--light-surface), var(--dark-surface)); min-height: 60px; display: flex; align-items: center; justify-content: center; text-align: center; transition: all 0.2s ease-in-out;
}
.term-card { cursor: grab; font-weight: 500; }
.term-card.dragging { opacity: 0.5; transform: scale(0.95); cursor: grabbing; }
.definition-card.drag-over { border-color: light-dark(var(--light-primary), var(--dark-primary)); transform: scale(1.02); }
.match-card.matched {
  background-color: light-dark(var(--light-correct-bg), var(--dark-correct-bg)); border-color: light-dark(var(--light-correct-border), var(--dark-correct-border)); color: light-dark(var(--light-correct-text), var(--dark-correct-text)); opacity: 0.6; pointer-events: none;
}
.match-card.incorrect-flash { animation: shake 0.5s ease-in-out; background-color: light-dark(var(--light-incorrect-flash), var(--dark-incorrect-flash)); }
#matchResults h2 { color: light-dark(var(--light-primary), var(--dark-primary)); font-size: 2.5em; }
.results-actions { display: flex; flex-wrap: wrap; justify-content: center; gap: 15px; margin-top: 30px; }

/* --- Learn & Misto Mode Specific --- */
#learnHeader { display: flex; justify-content: space-between; width: 100%; margin-bottom: 20px; font-size: 1.2em; font-weight: 500; }
#questionContainer { margin-bottom: 20px; min-height: 80px; }
#questionText, #mistoQuestionText { font-size: 1.5em; font-weight: 500; line-height: 1.4; text-align: left; }
#learnAnswerInput { min-height: 80px; }
#mistoAnswerOptions { margin-bottom: 25px; display: flex; flex-direction: column; gap: 10px; align-items: flex-start; text-align: left; }
.multiple-choice-option {
  display: flex; align-items: center; gap: 10px; padding: 10px; border-radius: 8px; border: 1px solid light-dark(var(--light-border), var(--dark-border)); width: calc(100% - 22px); cursor: pointer; transition: all 0.2s ease-in-out;
}
.multiple-choice-option:hover { background-color: light-dark(var(--light-card-bg), var(--dark-card-bg)); border-color: light-dark(var(--light-primary), var(--dark-primary)); }
.multiple-choice-option input[type="radio"] { width: 1.2em; height: 1.2em; }
.feedback-message {
  margin-top: 20px; padding: 12px; border-radius: 8px; font-weight: 500; min-height: 1.5em; display: none;
}
.feedback-message.visible { display: block; }
.feedback-message.correct { background-color: light-dark(var(--light-correct-bg), var(--dark-correct-bg)); color: light-dark(var(--light-correct-text), var(--dark-correct-text)); }
.feedback-message.incorrect { background-color: light-dark(var(--light-incorrect-bg), var(--dark-incorrect-bg)); color: light-dark(var(--light-incorrect-text), var(--dark-incorrect-text)); }
.quiz-nav {
    display: flex;
    justify-content: space-between;
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid light-dark(var(--light-border), var(--dark-border));
}
.quiz-nav-btn {
    width: auto;
    padding: 10px 20px;
}

/* --- Report Screen Specific --- */
.results-report-container {
    text-align: left;
    width: 100%;
}
.results-report-container h2 {
    font-size: 2em;
    font-weight: 500;
    color: light-dark(var(--light-primary), var(--dark-primary));
    text-align: center;
    margin-bottom: 0.5rem;
}
.results-report-container h3 {
    font-size: 1.4em;
    font-weight: 500;
    margin-top: 2rem;
    margin-bottom: 1rem;
    padding-bottom: 0.5rem;
    border-bottom: 1px solid light-dark(var(--light-border), var(--dark-border));
}
.report-topic {
    text-align: center;
    margin-top: 0;
    margin-bottom: 2rem;
    font-size: 1.1rem;
}
.report-question-card {
    background-color: light-dark(var(--light-surface), var(--dark-surface));
    border-left: 5px solid;
    padding: 1rem;
    margin-bottom: 1rem;
    border-radius: 8px;
}
.report-question-card.correct { border-left-color: var(--dark-correct-border); }
.report-question-card.incorrect { border-left-color: var(--dark-incorrect-border); }
.report-question-header {
    display: flex;
    justify-content: space-between;
    font-size: 0.9rem;
    color: light-dark(var(--light-text-secondary), var(--dark-text-secondary));
    margin-bottom: 0.5rem;
}
.report-question-text { margin: 0.5rem 0; font-weight: 500;}
.report-question-card p {
    margin-bottom: 0.5rem;
    line-height: 1.5;
}
.report-explanation {
    margin-top: 1rem;
    padding: 0.75rem;
    background-color: light-dark(var(--light-bg), var(--dark-bg));
    border-radius: 6px;
}
.report-explanation h4 { font-size: 1rem; margin-top: 0; margin-bottom: 0.5rem; font-weight: 500;}
.report-explanation a {
    color: light-dark(var(--light-primary), var(--dark-primary));
    text-decoration: none;
}
.report-explanation a:hover { text-decoration: underline; }
.report-summary-list {
    list-style-type: disc;
    padding-left: 20px;
}
.report-summary-list li { margin-bottom: 0.5rem; }

/* --- Library View --- */
.library-header {
  border-bottom: 1px solid light-dark(var(--light-border), var(--dark-border));
  margin-bottom: 2rem;
}
#libraryTitle {
    font-size: 2rem;
    font-weight: 700;
    margin: 0;
}
.library-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 1rem;
    margin-bottom: 1rem;
}
.library-tabs {
  display: flex;
  gap: 1.5rem;
  flex-wrap: wrap;
}
.tab-btn {
  background: none;
  border: none;
  color: light-dark(var(--light-text-secondary), var(--dark-text-secondary));
  padding: 0.5rem 0;
  font-size: 1rem;
  font-weight: 500;
  border-bottom: 2px solid transparent;
  cursor: pointer;
}
.tab-btn:hover {
  color: light-dark(var(--light-text-primary), var(--dark-text-primary));
}
.tab-btn.active {
  color: light-dark(var(--light-primary), var(--dark-primary));
  border-bottom-color: light-dark(var(--light-primary), var(--dark-primary));
}

.table-container {
    overflow-x: auto;
}
#historyTable {
    width: 100%;
    border-collapse: collapse;
    margin-top: 1rem;
}
#historyTable th, #historyTable td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid light-dark(var(--light-border), var(--dark-border));
}
#historyTable th {
    font-weight: 500;
    background-color: light-dark(var(--light-card-bg), var(--dark-card-bg));
}
#historyTable tbody tr {
    cursor: pointer;
    transition: background-color 0.2s;
}
#historyTable tbody tr:hover {
    background-color: light-dark(var(--light-card-bg), var(--dark-card-bg));
}
#reportsList .folder-item { cursor: pointer; }


.folder-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background-color: light-dark(var(--light-surface), var(--dark-surface));
    border: 1px solid light-dark(var(--light-border), var(--dark-border));
    border-radius: 8px;
    transition: background-color 0.2s;
    margin-bottom: 0.5rem;
}
.folder-item:hover {
    background-color: light-dark(var(--light-card-bg), var(--dark-card-bg));
}
.folder-icon { color: light-dark(var(--light-text-secondary), var(--dark-text-secondary)); flex-shrink: 0; }
.folder-info { flex-grow: 1; overflow: hidden; }
.folder-info .name { font-weight: 500; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}
.folder-info .count { font-size: 0.8rem; color: light-dark(var(--light-text-secondary), var(--dark-text-secondary)); }


/* --- Modals (Login, Save, etc.) --- */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  background-color: rgba(0, 0, 0, 0.6);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1100; /* Ensure modals are on top */
  padding: 20px;
  box-sizing: border-box;
}

.modal-content {
    background-color: light-dark(var(--light-surface), var(--dark-surface));
    padding: 30px;
    border-radius: 12px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
    width: 100%;
    max-width: 500px;
    position: relative;
    max-height: 90vh;
    overflow-y: auto;
    border: 1px solid light-dark(var(--light-border), var(--dark-border));
}

.modal-content.small-modal { max-width: 400px; }
.modal-content.large-modal { max-width: 800px; }

.modal-close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    background: none;
    border: none;
    font-size: 2rem;
    color: light-dark(var(--light-text-secondary), var(--dark-text-secondary));
    cursor: pointer;
    padding: 0;
    line-height: 1;
}

.modal-content h2 {
    margin-top: 0;
    text-align: center;
}
.modal-content p {
    text-align: center;
    margin-bottom: 20px;
}

.primary-login-btn { width: 100%; }
.google-login-btn {
    width: 100%;
    background-color: light-dark(var(--light-surface), var(--dark-surface));
    color: light-dark(var(--light-text-primary), var(--dark-text-primary));
    border: 1px solid light-dark(var(--light-border), var(--dark-border));
}
.google-login-btn svg { width: 20px; height: 20px; }
.social-login-divider {
    display: flex; align-items: center; text-align: center; margin: 20px 0;
    color: light-dark(var(--light-text-secondary), var(--dark-text-secondary));
}
.social-login-divider::before, .social-login-divider::after {
    content: ''; flex: 1; border-bottom: 1px solid light-dark(var(--light-border), var(--dark-border));
}
.social-login-divider:not(:empty)::before { margin-right: .5em; }
.social-login-divider:not(:empty)::after { margin-left: .5em; }

.danger-action-btn {
    background-color: light-dark(var(--light-error), var(--dark-secondary-accent));
    color: white;
}
.danger-action-btn:hover { background-color: light-dark(#a50e0e, #cf316a); }

.danger-action { color: light-dark(var(--light-error), var(--dark-secondary-accent)) !important; }
.danger-action:hover { background-color: light-dark(var(--light-incorrect-bg), rgba(255, 64, 129, 0.1)); }
.danger-action svg { color: light-dark(var(--light-error), var(--dark-secondary-accent)) !important; }

.confirm-actions {
    display: flex; justify-content: flex-end; gap: 10px; margin-top: 20px;
}
.modal-actions-column {
    flex-direction: column;
    gap: 15px;
}
.modal-actions-column button {
    width: 100%;
}

.selectable-list {
    max-height: 300px; overflow-y: auto; border: 1px solid light-dark(var(--light-border), var(--dark-border)); border-radius: 8px; padding: 10px; margin: 15px 0;
}
.selectable-card {
    display: flex; padding: 10px; border-radius: 6px; cursor: pointer;
}
.selectable-card:hover { background-color: light-dark(var(--light-card-bg), var(--dark-card-bg)); }
.selectable-card input { margin-right: 10px; }
.selectable-card-content { border-left: 1px solid light-dark(var(--light-border), var(--dark-border)); padding-left: 10px; }
.selectable-card-term { font-weight: 500; }
.selectable-card-definition { font-size: 0.9em; color: light-dark(var(--light-text-secondary), var(--dark-text-secondary)); }

.editor-actions {
    display: flex; justify-content: space-between; align-items: center; margin-top: 20px;
}
.editor-list, #editCardSetList {
    display: flex; flex-direction: column; gap: 15px; max-height: 50vh; overflow-y: auto; padding: 10px; border: 1px solid light-dark(var(--light-border), var(--dark-border)); border-radius: 8px; margin: 20px 0;
}
.editable-item {
    display: flex; gap: 10px; align-items: flex-start; padding: 15px; border-radius: 6px; background-color: light-dark(var(--light-bg), var(--dark-bg));
}
.editable-item-inputs { flex-grow: 1; display: flex; flex-direction: column; }
.editable-item-inputs input, .editable-item-inputs textarea { margin-bottom: 5px; width: calc(100% - 20px); }
.editable-item-inputs textarea { min-height: 40px; }
.delete-item-btn {
    flex-shrink: 0; background: none; border: none; color: light-dark(var(--light-text-secondary), var(--dark-text-secondary)); font-size: 1.5rem; cursor: pointer; padding: 0 5px;
}
.delete-item-btn:hover { color: light-dark(var(--light-error), var(--dark-secondary-accent)); }

.actions-menu { display: flex; flex-direction: column; width: 100%; }
.user-menu-item {
    display: flex; align-items: center; gap: 16px; padding: 12px 16px; width: 100%; border: none; background: transparent; text-align: left; font-size: 0.95rem; cursor: pointer; color: light-dark(var(--light-text-primary), var(--dark-text-primary)); box-sizing: border-box; border-radius: 8px;
}
.user-menu-item svg {
    color: light-dark(var(--light-text-secondary), var(--dark-text-secondary)); width: 20px; height: 20px;
}
.user-menu-item:hover { background-color: light-dark(var(--light-card-bg), var(--dark-card-bg)); }
.user-menu-item-with-submenu { position: relative; }
.submenu {
    position: absolute; bottom: 100%; left: 0; background-color: light-dark(var(--light-surface), var(--dark-surface)); border: 1px solid light-dark(var(--light-border), var(--dark-border)); border-radius: 8px; box-shadow: 0 2px 8px light-dark(var(--light-shadow-color-1), var(--dark-shadow-color-1)); z-index: 10; padding: 5px;
}
.submenu-item {
    display: block; width: 100%; padding: 8px 12px; background: none; border: none; text-align: left; cursor: pointer; border-radius: 4px;
}
.submenu-item:hover { background-color: light-dark(var(--light-card-bg), var(--dark-card-bg)); }
.submenu-arrow { transition: transform 0.2s; }
.submenu-arrow.open { transform: rotate(180deg); }

.modal-footer-actions {
    display: flex; justify-content: flex-end; gap: 1rem; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid light-dark(var(--light-border), var(--dark-border));
}
.editor-tabs { display: flex; border-bottom: 1px solid light-dark(var(--light-border), var(--dark-border)); margin-bottom: 1rem; }
#markdownEditorTextarea { height: 40vh; }
.card-viewer-nav {
    display: flex; justify-content: space-between; align-items: center; margin-top: 1rem; padding-top: 1rem; border-top: 1px solid light-dark(var(--light-border), var(--dark-border));
}

.speech-btn {
    background: none;
    border: none;
    cursor: pointer;
    padding: 5px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: light-dark(var(--light-text-secondary), var(--dark-text-secondary));
    flex-shrink: 0;
}
.speech-btn:hover {
    background-color: light-dark(var(--light-card-bg), var(--dark-card-bg));
    color: light-dark(var(--light-primary), var(--dark-primary));
}
.speech-btn svg { width: 20px; height: 20px; fill: currentColor; }

.speech-text-wrapper {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
    width: 100%;
}
.text-to-speak {
    flex-grow: 1;
}

/* User Profile Modal Specifics */
#userProfileModal .user-menu-header {
    display: flex;
    align-items: center;
    gap: 16px;
    padding: 16px 0;
}
#userProfileModal .user-info-avatar {
    width: 64px;
    height: 64px;
    border-radius: 50%;
    flex-shrink: 0;
}
#userProfileModal .user-info-details {
    display: flex;
    flex-direction: column;
}
#userProfileModal .user-info-name {
    font-weight: 500;
    font-size: 1.2rem;
    color: light-dark(var(--light-text-primary), var(--dark-text-primary));
}
#userProfileModal .user-info-email {
    font-size: 0.9rem;
    color: light-dark(var(--light-text-secondary), var(--dark-text-secondary));
}

/* Settings Modal Specifics */
#settingsModal .modal-tab-content {
    display: none;
    padding: 20px 0;
}
#settingsModal .modal-tab-content.active {
    display: block;
}
#settingsModal form {
    display: flex;
    flex-direction: column;
    gap: 10px;
}
#settingsModal h4 {
    margin-top: 15px;
    margin-bottom: 5px;
    padding-bottom: 5px;
    border-bottom: 1px solid light-dark(var(--light-border), var(--dark-border));
}
#settingsModal label {
    font-weight: 500;
    font-size: 0.9rem;
    margin-top: 5px;
}
#settingsModal input {
    margin-bottom: 5px;
    padding: 12px;
}
#settingsModal button[type="submit"] {
    margin-top: 15px;
    align-self: flex-end;
}
.avatar-setting {
    display: flex;
    align-items: center;
    gap: 20px;
}
.avatar-actions {
    display: flex;
    flex-direction: column;
    gap: 10px;
}